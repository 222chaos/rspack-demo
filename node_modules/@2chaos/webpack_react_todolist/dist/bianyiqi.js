var babel = require("@babel/core");
var glob = require("glob");
var fs = require("fs");
var files = glob.sync("./src/**/*.{js,jsx,tsx,ts}", { nodir: true });
files.forEach(function (file) {
    var input = fs.readFileSync(file, "utf8");
    babel.transform(input, { filename: file }, function (err, result) {
        if (err)
            throw err;
        var outputFilename = file
            .replace("/input/", "/output/")
            .replace(/(jsx?|tsx?)/, "js");
        fs.mkdirSync(outputFilename.replace(/\/[^\/]*$/, ""), { recursive: true });
        fs.writeFileSync(outputFilename, result.code, "utf8");
    });
});
